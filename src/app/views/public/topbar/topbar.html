<!-- src/app/components/topbar/topbar.component.html -->
<header class="site-header" [class.scrolled]="isScrolled">
    <div class="container header-inner">

        <!-- Logo -->
        <a routerLink="/" class="header-logo" (click)="closeMenu()">
            <strong>Retention</strong>Forge
        </a>

        <!-- Desktop Navigation – Clean & Spacious -->
        <nav class="header-nav" aria-label="Main navigation">
            <ul class="nav-list">
                <li>
                    <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
                        <i class="fa-solid fa-house"></i> Home
                    </a>
                </li>

                <li>
                    <a routerLink="/about" routerLinkActive="active">
                        <i class="fa-solid fa-circle-info"></i> About
                    </a>
                </li>

                <!-- Services – Mega-style on hover (no dropdown arrow clutter) -->
                <li class="nav-item-services">
                    <a href="javascript:void(0)" class="nav-link-services">
                        <i class="fa-solid fa-layer-group"></i>
                        Services
                        <i class="fa-solid fa-chevron-down"></i>
                    </a>

                    <!-- Mega Dropdown -->
                    <div class="services-megamenu">
                        <div class="megamenu-grid">
                            <div class="megamenu-column">
                                <h4><i class="fa-solid fa-chart-line"></i> Core Retention Services</h4>
                                <ul>
                                    <li><a routerLink="/services/churn-analysis" (click)="closeMenu()">Churn Analysis &
                                            Retention Studies</a></li>
                                    <li><a routerLink="/services/cs-department" (click)="closeMenu()">CS Department
                                            Design & Build</a></li>
                                    <li><a routerLink="/services/revenue-retention" (click)="closeMenu()">Revenue
                                            Retention Strategy</a></li>
                                    <li><a routerLink="/services/health-scoring" (click)="closeMenu()">Customer Health
                                            Scoring</a></li>
                                </ul>
                            </div>

                            <div class="megamenu-column">
                                <h4><i class="fa-solid fa-person-arrow-up-from-line"></i> Growth & Expansion</h4>

                                <ul>
                                    <li><a routerLink="/services/account-management" (click)="closeMenu()">Account
                                            Management & Expansion</a></li>
                                    <li><a routerLink="/services/onboarding" (click)="closeMenu()">Onboarding
                                            Optimization</a></li>
                                    <li><a routerLink="/services/professional-services"
                                            (click)="closeMenu()">Professional Services Revenue</a></li>
                                </ul>
                            </div>

                            <div class="megamenu-column">
                                <h4><i class="fa-solid fa-users-gear"></i> Leadership & Systems</h4>
                                <ul>
                                    <li><a routerLink="/services/org-design" (click)="closeMenu()">Post-Sale Org
                                            Design</a></li>
                                    <li><a routerLink="/services/kpi-framework" (click)="closeMenu()">KPI & Metrics
                                            Framework</a></li>
                                    <li><a routerLink="/services/coaching" (click)="closeMenu()">Executive CS
                                            Coaching</a></li>
                                </ul>
                            </div>
                        </div>

                        <!-- Mini CTA inside megamenu -->
                        <div class="megamenu-cta">
                            <p><i class="fa-solid fa-headset"></i> Not sure where to start?</p>
                            <a routerLink="/contact" class="btn btn-primary btn-small">Book a Free Consultation</a>
                        </div>
                    </div>
                </li>

                <li>
                    <a routerLink="/contact" routerLinkActive="active">
                        <i class="fa-solid fa-phone"></i> Contact
                    </a>
                </li>
            </ul>
        </nav>


        <!-- CTA Button – Always Visible on Desktop -->
        <div class="header-cta">
            <a routerLink="/contact" class="btn btn-primary">
                <i class="fa-solid fa-calendar-check"></i>
                Book Consultation
            </a>
        </div>

        <!-- Mobile Menu Toggle -->
        <button class="mobile-toggle" (click)="toggleMobileMenu()" [attr.aria-expanded]="isMobileMenuOpen">
            <span></span><span></span><span></span>
        </button>
    </div>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay" [class.open]="isMobileMenuOpen" (click)="closeMenu()"></div>
    <nav class="mobile-menu" [class.open]="isMobileMenuOpen">
        <div class="mobile-menu-header">
            <a routerLink="/" class="mobile-logo" (click)="closeMenu()">RetentionForge</a>
            <button class="mobile-close" (click)="closeMenu()">Close</button>
        </div>
        <ul class="mobile-nav-list">
            <li><a routerLink="/" (click)="closeMenu()">Home</a></li>
            <li><a routerLink="/about" (click)="closeMenu()">About</a></li>
            <li>
                <a href="javascript:void(0)" (click)="toggleMobileServices()">
                    Services
                    <i class="fa-solid fa-chevron-down" [class.rotate]="mobileServicesOpen"></i>
                </a>
                <ul class="mobile-services-list" [class.open]="mobileServicesOpen">
                    <li><a routerLink="/services/churn-analysis" (click)="closeMenu()">Churn Analysis</a></li>
                    <li><a routerLink="/services/cs-department" (click)="closeMenu()">CS Department Build</a></li>
                    <li><a routerLink="/services/revenue-retention" (click)="closeMenu()">Revenue Retention</a></li>
                    <li><a routerLink="/services/health-scoring" (click)="closeMenu()">Health Scoring</a></li>
                    <li><a routerLink="/services/account-management" (click)="closeMenu()">Account Expansion</a></li>
                    <li><a routerLink="/services/onboarding" (click)="closeMenu()">Onboarding</a></li>
                    <li><a routerLink="/services/org-design" (click)="closeMenu()">Org Design</a></li>
                    <li><a routerLink="/services/coaching" (click)="closeMenu()">Executive Coaching</a></li>
                </ul>
            </li>
            <li><a routerLink="/contact" (click)="closeMenu()">Contact</a></li>
            <li class="mobile-cta">
                <a routerLink="/contact" class="btn btn-primary btn-block">
                    <i class="fa-solid fa-calendar-plus"></i> Schedule Consultation
                </a>
            </li>
        </ul>
    </nav>
</header>